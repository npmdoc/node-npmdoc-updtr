<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/peerigon/updtr#readme"

    >updtr (v1.0.0)</a>
</h1>
<h4>Update outdated npm modules with zero painâ„¢</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.updtr">module updtr</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.updtr.run">
            function <span class="apidocSignatureSpan">updtr.</span>run
            <span class="apidocSignatureSpan">(config, done)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">updtr.</span>reporters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">updtr.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.updtr.reporters">module updtr.reporters</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.updtr.reporters.default">
            function <span class="apidocSignatureSpan">updtr.reporters.</span>default
            <span class="apidocSignatureSpan">(emitter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.updtr.reporters.shy">
            function <span class="apidocSignatureSpan">updtr.reporters.</span>shy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.updtr.reporters.simple">
            function <span class="apidocSignatureSpan">updtr.reporters.</span>simple
            <span class="apidocSignatureSpan">(emitter)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.updtr.util">module updtr.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.updtr.util.modulesMissingMessage">
            function <span class="apidocSignatureSpan">updtr.util.</span>modulesMissingMessage
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.updtr" id="apidoc.module.updtr">module updtr</a></h1>


    <h2>
        <a href="#apidoc.element.updtr.run" id="apidoc.element.updtr.run">
        function <span class="apidocSignatureSpan">updtr.</span>run
        <span class="apidocSignatureSpan">(config, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function run(config, done) {
    var emitter = new EventEmitter();
    var testCmd;
    var reporter;

    function exec(cmd, cb) {
        childProcess.exec(cmd, { maxBuffer: Infinity, encoding: &#x22;utf8&#x22;, cwd: config.cwd }, cb);
    }

    function finish(err) {
        emitter.removeAllListeners();
        done(err || null);
    }

    if (typeof config.cwd !== &#x22;string&#x22;) {
        throw new Error(&#x22;Cannot run updtr: cwd missing&#x22;);
    }

    sanitizeConfig(config);

    if (config.registry &#x26;&#x26; config.useYarn) {
        throw new Error(&#x22;`yarn add` does not support custom registries yet. Please use a .npmrc file to achieve this.&#x22;);
    }

    reporter = config.reporter;
    testCmd = config.testCmd;

    reporter(emitter);

    emitter.emit(&#x22;init&#x22;, {
        cwd: config.cwd
    });
    exec(config.useYarn ? &#x22;yarn outdated --json --flat&#x22; : &#x22;npm outdated --json --long --depth=0&#x22;, function (err, stdout) {
        var missing;
        var outdated;
        var infos = [];
        var tasks;

        function createTask(info, index) {
            return function (done) {
                var event = {
                    current: index + 1, // index is zero-based
                    total: tasks.length,
                    info: info,
                    testCmd: testCmd,
                    installCmd: (config.useYarn ? &#x22;yarn add&#x22; : &#x22;npm i&#x22;) + (config.registry ? (&#x22; --registry &#x22; + config.registry) : &#x22;&#x22;)
                };
                var testStdout;
                var installCmd;

                if (!config.useYarn &#x26;&#x26; config.saveExact) {
                    event.installCmd += &#x22; --save-exact&#x22;;
                }

                installCmd = event.installCmd + &#x22; &#x22; + info.name + &#x22;@&#x22; + info.updateTo + &#x22; &#x22; + info.saveCmd;

                emitter.emit(&#x22;updating&#x22;, event);

                async.series({
                    deleteOldVersion: async.apply(exec, (config.useYarn ? &#x22;yarn remove &#x22; : &#x22;npm remove &#x22;) + info.name + &#x22; &#x22; + info
.saveCmd),
                    installNewVersion: async.apply(exec, installCmd),
                    emitTestingEvent: function (done) {
                        emitter.emit(&#x22;testing&#x22;, event);
                        setImmediate(done);
                    },
                    runTests: function runTests(callback) {
                        exec(testCmd, function (err, stdout, stderr) {
                            if (err) {
                                testStdout = stdout;
                                callback(err);
                                return;
                            }
                            callback(null, stdout, stderr);
                        });
                    }
                }, function (err) {
                    if (err) {
                        emitter.emit(&#x22;rollback&#x22;, event);
                        exec(event.installCmd + &#x22; &#x22; + info.name + &#x22;@&#x22; + info.current + &#x22; &#x22; + info.saveCmd + (config.saveExact ? &#x22; --
save-exact&#x22; : &#x22;&#x22;), function (err) {
                            if (err) {
                                finish(err);
                                return;
                            }
                            emitter.emit(&#x22;rollbackDone&#x22;, event);
                            if (config.testStdout) {
                                event.testStdout = testStdout;
                                emitter.emit(&#x22;testStdout&#x22;, event);
                            }
                            done();
                        });
                        return;
                    }
                    emitter.emit(&#x22;updatingDone&#x22;, event);
                    done();
                });
            };
        }

        if (err &#x26;&#x26; err.code &#x3e; 1) {
            finish(err);
            return;
        }

        if (!stdout) {
            emitter.emit(&#x22;noop&#x22;);
            finish();
            return;
        }

        outdated = JSON.parse(stdout);
        if (config.useYarn) {
            if (&#x22;data&#x22; in outdated &#x26;&#x26; outdated.data.body instanceof Array) {
                infos = outdated.data.body.map(function (info) {
                    return { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.updtr.reporters" id="apidoc.module.updtr.reporters">module updtr.reporters</a></h1>


    <h2>
        <a href="#apidoc.element.updtr.reporters.default" id="apidoc.element.updtr.reporters.default">
        function <span class="apidocSignatureSpan">updtr.reporters.</span>default
        <span class="apidocSignatureSpan">(emitter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function defaultReporter(emitter) {
    var currentLine = &#x22;&#x22;;
    var spinner;

    function logProgress(message) {
        if (spinner) {
            spinner.stop();
        }
        currentLine = message;
        spinner = new Spinner(message + &#x22;... &#x22;.grey + &#x22;%s &#x22;);
        spinner.setSpinnerString(19);
        spinner.start();
    }

    function finishProgress(message) {
        if (spinner) {
            spinner.stop(true);
        }
        if (message) {
            console.log.apply(console, arguments);
        } else {
            console.log(currentLine);
        }
        currentLine = &#x22;&#x22;;
    }

    function logUpdateProgress(event, status, message) {
        var progress = event.current + &#x22;/&#x22; + event.total;
        var circle = unicons.cli(&#x22;circle&#x22;);
        var name = event.info.name;

        if (status === &#x22;error&#x22;) {
            circle = circle.red;
            name = name.red;
        } else if (status === &#x22;success&#x22;) {
            circle = circle.green;
        } else {
            circle = circle.grey;
        }

        logProgress([
            progress.grey,
            &#x22;\t&#x22;,
            circle,
            name,
            message
        ].join(&#x22; &#x22;));
    }

    // Activate colors by extending String.prototype
    require(&#x22;colors&#x22;);

    emitter.on(&#x22;init&#x22;, function () {
        logProgress(&#x22;Looking for outdated modules&#x22;);
    });
    emitter.on(&#x22;noop&#x22;, function () {
        finishProgress(&#x22;No outdated modules found. Are they installed?&#x22;);
    });
    emitter.on(&#x22;modulesMissing&#x22;, function (event) {
        finishProgress(util.modulesMissingMessage(event));
    });
    emitter.on(&#x22;outdated&#x22;, function (event) {
        finishProgress(&#x22;Found %s outdated module%s&#x22;, event.total, event.total === 1 ? &#x22;&#x22; : &#x22;s&#x22;);
        console.log(&#x22;&#x22;);
        console.log(&#x22;Starting to update your modules&#x22; + &#x22;...&#x22;.grey);
    });
    emitter.on(&#x22;updating&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;pending&#x22;, &#x22;updating &#x22;.grey + info.current + &#x22; &#x22; + unicons.cli(&#x22;arrowRight&#x22;).grey + &#x22; &#x22; + info.
updateTo);
    });
    emitter.on(&#x22;testing&#x22;, function (event) {
        logUpdateProgress(event, &#x22;pending&#x22;, &#x22;testing&#x22;.grey);
    });
    emitter.on(&#x22;rollback&#x22;, function (event) {
        logUpdateProgress(event, &#x22;error&#x22;, &#x22;rolling back&#x22;.grey);
    });
    emitter.on(&#x22;rollbackDone&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;error&#x22;, info.updateTo + &#x22; failed&#x22;.grey);
        finishProgress();
    });
    emitter.on(&#x22;testStdout&#x22;, function (event) {
        console.log(event.testStdout);
    });
    emitter.on(&#x22;updatingDone&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;success&#x22;, info.updateTo + &#x22; success&#x22;.grey);
        finishProgress();
    });
    emitter.on(&#x22;finished&#x22;, function () {
        console.log(&#x22;&#x22;);
        console.log(&#x22;Finished&#x22;);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.updtr.reporters.shy" id="apidoc.element.updtr.reporters.shy">
        function <span class="apidocSignatureSpan">updtr.reporters.</span>shy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function shyReporter() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.updtr.reporters.simple" id="apidoc.element.updtr.reporters.simple">
        function <span class="apidocSignatureSpan">updtr.reporters.</span>simple
        <span class="apidocSignatureSpan">(emitter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function defaultReporter(emitter) {
    var currentLine = &#x22;&#x22;;

    function logProgress(message) {
        currentLine = message;
        console.log(message + &#x22;... &#x22;.grey);
    }

    function finishProgress(message) {
        if (message) {
            console.log.apply(console, arguments);
        } else {
            console.log(currentLine);
        }
        currentLine = &#x22;&#x22;;
    }

    function logUpdateProgress(event, status, message) {
        var progress = event.current + &#x22;/&#x22; + event.total;
        var circle = unicons.cli(&#x22;circle&#x22;);
        var name = event.info.name;

        if (status === &#x22;error&#x22;) {
            circle = circle.red;
            name = name.red;
        } else if (status === &#x22;success&#x22;) {
            circle = circle.green;
        } else {
            circle = circle.grey;
        }

        logProgress([
            progress.grey,
            &#x22;\t&#x22;,
            circle,
            name,
            message
        ].join(&#x22; &#x22;));
    }

    // Activate colors by extending String.prototype
    require(&#x22;colors&#x22;);

    emitter.on(&#x22;init&#x22;, function () {
        logProgress(&#x22;Looking for outdated modules&#x22;);
    });
    emitter.on(&#x22;noop&#x22;, function () {
        finishProgress(&#x22;No outdated modules found. Are they installed?&#x22;);
    });
    emitter.on(&#x22;modulesMissing&#x22;, function (event) {
        finishProgress(util.modulesMissingMessage(event));
    });
    emitter.on(&#x22;outdated&#x22;, function (event) {
        finishProgress(&#x22;Found %s outdated module%s&#x22;, event.total, event.total === 1 ? &#x22;&#x22; : &#x22;s&#x22;);
        console.log(&#x22;&#x22;);
        console.log(&#x22;Starting to update your modules&#x22; + &#x22;...&#x22;.grey);
    });
    emitter.on(&#x22;updating&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;pending&#x22;, &#x22;updating &#x22;.grey + info.current + &#x22; &#x22; + unicons.cli(&#x22;arrowRight&#x22;).grey + &#x22; &#x22; + info.
updateTo);
    });
    emitter.on(&#x22;testing&#x22;, function (event) {
        logUpdateProgress(event, &#x22;pending&#x22;, &#x22;testing&#x22;.grey);
    });
    emitter.on(&#x22;rollback&#x22;, function (event) {
        logUpdateProgress(event, &#x22;error&#x22;, &#x22;rolling back&#x22;.grey);
    });
    emitter.on(&#x22;rollbackDone&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;error&#x22;, info.updateTo + &#x22; failed&#x22;.grey);
        console.log(&#x22;&#x22;);
    });
    emitter.on(&#x22;testStdout&#x22;, function (event) {
        console.log(event.testStdout);
    });
    emitter.on(&#x22;updatingDone&#x22;, function (event) {
        var info = event.info;

        logUpdateProgress(event, &#x22;success&#x22;, info.updateTo + &#x22; success&#x22;.grey);
        console.log(&#x22;&#x22;);
    });
    emitter.on(&#x22;finished&#x22;, function () {
        console.log(&#x22;&#x22;);
        console.log(&#x22;Finished&#x22;);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.updtr.util" id="apidoc.module.updtr.util">module updtr.util</a></h1>


    <h2>
        <a href="#apidoc.element.updtr.util.modulesMissingMessage" id="apidoc.element.updtr.util.modulesMissingMessage">
        function <span class="apidocSignatureSpan">updtr.util.</span>modulesMissingMessage
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function modulesMissingMessage(event) {
    var moduleList = event.infos.map(function (info) {
        return info.name;
    }).join(&#x22;, &#x22;);

    return &#x22;Some modules are not installed: &#x22; + moduleList +
           &#x22;. Please install with &#x27;npm install&#x27; first.&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
emitter.on(&#x22;init&#x22;, function () {
    logProgress(&#x22;Looking for outdated modules&#x22;);
});
emitter.on(&#x22;noop&#x22;, function () {
    finishProgress(&#x22;No outdated modules found. Are they installed?&#x22;);
});
emitter.on(&#x22;modulesMissing&#x22;, function (event) {
    finishProgress(util.<span class="apidocCodeKeywordSpan">modulesMissingMessage</span>(event));
});
emitter.on(&#x22;outdated&#x22;, function (event) {
    finishProgress(&#x22;Found %s outdated module%s&#x22;, event.total, event.total === 1 ? &#x22;&#x22; : &#x22;s&#x22;);
    console.log(&#x22;&#x22;);
    console.log(&#x22;Starting to update your modules&#x22; + &#x22;...&#x22;.grey);
});
emitter.on(&#x22;updating&#x22;, function (event) {
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
